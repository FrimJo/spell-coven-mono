name = "cloudflare-peerjs-server"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects binding
[[durable_objects.bindings]]
name = "GAME_ROOM"
class_name = "GameRoomCoordinator"
script_name = "cloudflare-peerjs-server"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["GameRoomCoordinator"]

# Development configuration
[env.development]
name = "cloudflare-peerjs-server-dev"
# Use port 9000 to match old peerjs-server for drop-in replacement
# Run with: wrangler dev --port 9000

# Production configuration
[env.production]
name = "cloudflare-peerjs-server"
# Custom domain can be configured here if needed
# routes = [{ pattern = "peerjs.spell-coven.com", zone_name = "spell-coven.com" }]
